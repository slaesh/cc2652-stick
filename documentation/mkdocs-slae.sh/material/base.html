{#-
  This file was automatically generated - do not edit
-#}
{% import "partials/language.html" as lang with context %}
{% set palette = config.theme.palette %}
{% set font = config.theme.font %}
<!doctype html>
<html lang="{{ lang.t('language') }}" class="no-js">
  <head>
    {% block site_meta %}
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      {% if page and page.meta and page.meta.description %}
        <meta name="description" content="{{ page.meta.description }}">
      {% elif config.site_description %}
        <meta name="description" content="{{ config.site_description }}">
      {% endif %}
      {% if page and page.meta and page.meta.redirect %}
        <script>var anchor=window.location.hash.substr(1);location.href="{{ page.meta.redirect }}"+(anchor?"#"+anchor:"")</script>
        <meta http-equiv="refresh" content="0; url={{ page.meta.redirect }}">
        <meta name="robots" content="noindex">
        <link rel="canonical" href="{{ page.meta.redirect }}">
      {% elif page.canonical_url %}
        <link rel="canonical" href="{{ page.canonical_url }}">
      {% endif %}
      {% if page and page.meta and page.meta.author %}
        <meta name="author" content="{{ page.meta.author }}">
      {% elif config.site_author %}
        <meta name="author" content="{{ config.site_author }}">
      {% endif %}
      <link rel="shortcut icon" href="{{ config.theme.favicon | url }}">
      <meta name="generator" content="mkdocs-{{ mkdocs_version }}, mkdocs-material-5.4.0">
    {% endblock %}
    {% block htmltitle %}
      {% if page and page.meta and page.meta.title %}
        <title>{{ page.meta.title }}</title>
      {% elif page and page.title and not page.is_homepage %}
        <title>{{ page.title | striptags }} - {{ config.site_name }}</title>
      {% else %}
        <title>{{ config.site_name }}</title>
      {% endif %}
    {% endblock %}
    {% block styles %}
      <link rel="stylesheet" href="{{ 'assets/stylesheets/main.545621a7.min.css' | url }}">
      {% if palette.scheme or palette.primary or palette.accent %}
        <link rel="stylesheet" href="{{ 'assets/stylesheets/palette.36d1b78f.min.css' | url }}">
      {% endif %}
      {% if palette.primary %}
        {% import "partials/palette.html" as map %}
        {% set primary = map.primary(
          palette.primary | replace(" ", "-") | lower
        ) %}
        <meta name="theme-color" content="{{ primary }}">
      {% endif %}
    {% endblock %}
    {% block libs %}{% endblock %}
    {% block fonts %}
      {% if font != false %}
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family={{
            font.text | replace(' ', '+') + ':300,400,400i,700%7C' +
            font.code | replace(' ', '+')
          }}&display=fallback">
        <style>body,input{font-family:"{{ font.text }}",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"{{ font.code }}",SFMono-Regular,Consolas,Menlo,monospace}</style>
      {% endif %}
    {% endblock %}
    {% if config.extra.manifest %}
      <link rel="manifest" href="{{ config.extra.manifest | url }}" crossorigin="use-credentials">
    {% endif %}
    {% for path in config["extra_css"] %}
      <link rel="stylesheet" href="{{ path | url }}">
    {% endfor %}
    {% block analytics %}
      {% if config.google_analytics %}
        {% include "partials/integrations/analytics.html" %}
      {% endif %}
    {% endblock %}
    {% block extrahead %}{% endblock %}

    <!-- snipcart stuff -->
    <link rel="preconnect" href="https://app.snipcart.com">
    <link rel="preconnect" href="https://cdn.snipcart.com">
    <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.27/default/snipcart.css" />
    
    <style>
      .cta__button {
        background-color: darkorange;
        border-radius: 8px;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        cursor: pointer;
      }

      .cta__button--disabled {
        background-color: darkgray;
        cursor: not-allowed;
      }

      #waitinglist_emailinput {
        line-height: 40px;
        font-size: 24px;
        border-color: darkgray;
        border-style: solid;
        border-width: 1px;
        border-radius: 4px;
      }

      .snipcart-checkout__button {
        margin-left: 10px;
        background-color: #2f3c86;
        color: white;
        padding: 15px 6px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 12px;
        cursor: pointer;
      }

      #cur-currency {
        padding: 12px 16px;
        cursor: pointer;
        background-color: #2f3c86;
      }

      .snipcart-checkout__info {
        padding: 0px 24px;
      }
    </style>
  </head>
  {% set direction = config.theme.direction or lang.t('direction') %}
  {% if palette.scheme or palette.primary or palette.accent %}
    {% set scheme  = palette.scheme | lower %}
    {% set primary = palette.primary | replace(" ", "-") | lower %}
    {% set accent  = palette.accent  | replace(" ", "-") | lower %}
    <body dir="{{ direction }}" data-md-color-scheme="{{ scheme }}" data-md-color-primary="{{ primary }}" data-md-color-accent="{{ accent }}">
  {% else %}
    <body dir="{{ direction }}">
  {% endif %}
    {% if "preference" == palette.scheme %}
      <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
    {% endif %}
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      {% if page.toc | first is defined %}
        {% set skip = page.toc | first %}
        <a href="{{ skip.url | url }}" class="md-skip">
          {{ lang.t('skip.link.title') }}
        </a>
      {% endif %}
    </div>
    <div data-md-component="announce">
      {% if self.announce() %}
        <aside class="md-announce">
          <div class="md-announce__inner md-grid md-typeset">
            {% block announce %}{% endblock %}
          </div>
        </aside>
      {% endif %}
    </div>
    {% block header %}
      {% include "partials/header.html" %}
    {% endblock %}
    <div class="md-container" data-md-component="container">
      {% block hero %}
        {% if page and page.meta and page.meta.hero %}
          {% include "partials/hero.html" with context %}
        {% endif %}
      {% endblock %}
      {% block tabs %}
        {% if "tabs" in config.theme.features %}
          {% include "partials/tabs.html" %}
        {% endif %}
      {% endblock %}
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          {% block site_nav %}
            {% if nav %}
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    {% include "partials/nav.html" %}
                  </div>
                </div>
              </div>
            {% endif %}
            {% if page.toc %}
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    {% include "partials/toc.html" %}
                  </div>
                </div>
              </div>
            {% endif %}
          {% endblock %}
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              {% block content %}
                {% if page.edit_url %}
                  <a href="{{ page.edit_url }}" title="{{ lang.t('edit.link.title') }}" class="md-content__button md-icon">
                    {% include ".icons/material/pencil.svg" %}
                  </a>
                {% endif %}
                {% block source %}
                  {% if page and page.meta and page.meta.source %}
                    {% include "partials/source-link.html" %}
                  {% endif %}
                {% endblock %}
                {% if not "\x3ch1" in page.content %}
                  <h1>{{ page.title | default(config.site_name, true)}}</h1>
                {% endif %}
                {{ page.content }}
                {% if page and page.meta %}
                  {% if page.meta.git_revision_date_localized or
                        page.meta.revision_date
                  %}
                    {% include "partials/source-date.html" %}
                  {% endif %}
                {% endif %}
              {% endblock %}
              {% block disqus %}
                {% include "partials/integrations/disqus.html" %}
              {% endblock %}
            </article>
          </div>
        </div>
      </main>
      {% block footer %}
        {% include "partials/footer.html" %}
      {% endblock %}
    </div>
    {% block scripts %}
      <script src="{{ 'assets/javascripts/vendor.de50e36d.min.js' | url }}"></script>
      <script src="{{ 'assets/javascripts/bundle.fc9c3121.min.js' | url }}"></script>
      {%- set translations = {} -%}
      {%- for key in [
        "clipboard.copy",
        "clipboard.copied",
        "search.config.lang",
        "search.config.pipeline",
        "search.config.separator",
        "search.result.placeholder",
        "search.result.none",
        "search.result.one",
        "search.result.other"
      ] -%}
        {%- set _ = translations.update({ key: lang.t(key) }) -%}
      {%- endfor -%}
      <script id="__lang" type="application/json">
        {{- translations | tojson -}}
      </script>
      {% block config %}{% endblock %}
      <script>
        app = initialize({
          base: "{{ base_url }}",
          features: {{ config.theme.features | tojson }},
          search: Object.assign({
            worker: "{{ 'assets/javascripts/worker/search.a68abb33.min.js' | url }}"
          }, typeof search !== "undefined" && search)
        })
      </script>
      {% for path in config["extra_javascript"] %}
        <script src="{{ path | url }}"></script>
      {% endfor %}
    {% endblock %}

    <!-- patreon stuff 
    <script async src="https://c6.patreon.com/becomePatronButton.bundle.js"></script>
    -->

    <!-- Test MDAzOTUzNTItOTZhOC00MTNhLWE2YjgtYjZmNDY1MDNjMjdjNjM3NDA1MjI4Mjg2NTQ1Nzk0 -->
    <!-- Live NTMxNTU0OTYtNjAxOC00YjdkLTg4YmEtMjY5MjI2MTNhNzUzNjM3NDA1MjI4Mjg2NTQ1Nzk0 -->

    <!-- data-config-modal-style="side" -->
    <div
      id="snipcart"
      data-api-key="NTMxNTU0OTYtNjAxOC00YjdkLTg4YmEtMjY5MjI2MTNhNzUzNjM3NDA1MjI4Mjg2NTQ1Nzk0"
      hidden>

    <billing section="bottom">
      <fieldset class="snipcart-form__set">

        <div class="snipcart-form__field">
          <snipcart-label class="snipcart__font--tiny" for="vatNumber">
              VAT Number
          </snipcart-label>
          <snipcart-input name="vatNumber"></snipcart-input>
        </div>

        <div class="snipcart-form__field">
            <div class="snipcart-form__field-checkbox">
                <snipcart-checkbox name="subscribeToNewsletter"></snipcart-checkbox>
                <snipcart-label class="snipcart__font--tiny snipcart-form__label--checkbox" for="subscribeToNewsletter">
                    Subscribe to newsletter (no spam, really rare, unperiodic)
                </snipcart-label>
            </div>
        </div>
      </fieldset>
    </billing>

    <address-fields section="top">
      <div>
          <snipcart-label for="phone">
              Phone number (only used for delivery)
          </snipcart-label>
          <snipcart-input name="phone">
          </snipcart-input>
          <br />
          <p>Please take care that your building number is present! :)</p>
      </div>
  </address-fields>

    <payment section="top">
      <div>
          <p>
              <snipcart-checkbox name="privacy-policy" required></snipcart-checkbox>
              <snipcart-label for="privacy-policy">I have read and agree to the&nbsp;<a href="#">Privacy Policy</a></snipcart-label>
          </p>
      </div>
  </payment>
    </div>
   
    <script>
      function joinWatchlist() {
        console.log('join!!! =)');

        const thisBtn = document.querySelector('#join_waitinglist');
        const wtlInpt = document.querySelector('#waitinglist_emailinput');

        if (!thisBtn || !wtlInpt) return;

        const email = wtlInpt.value;
        if (!email) return;

        var xhr = new XMLHttpRequest();
        xhr.open("POST", 'https://cors-anywhere.herokuapp.com/http://srv.slae.sh:6789/join-watchlist', true);
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = () => {
            if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                thisBtn.classList.add('cta__button--disabled');
                window.alert("Thanks!!");
            } else if (xhr.readyState === XMLHttpRequest.DONE) {
              window.alert("Sad! Something went wrong.. =/");

              thisBtn.removeAttribute("disabled");
              wtlInpt.removeAttribute("disabled");
            }
        }

        xhr.send(JSON.stringify({email}));

        thisBtn.setAttribute("disabled", true);
        wtlInpt.setAttribute("disabled", true);
      }
    </script>

    <script>
      const LOCALSTORAGE_CURRENCY_KEY = 'snipcart-current-currency';

      window.getCurrentCurrency = (fallback) => {
        let curCurrency = '';

        try {
          if (document.querySelector('.snipcart-total-price').innerText.includes('$')) {
            curCurrency = 'usd';
          }
          else if (document.querySelector('.snipcart-total-price').innerText.includes('€')) {
            curCurrency = 'eur';
          }
        } catch (error) {
          console.log('could not get our current currency..', error);
        }

        return curCurrency || fallback || 'eur';
      };

      window.displayCurrency = (currency) => {
        if (!currency) return;

        const currencyTxt = `currency: ${currency.toUpperCase()}<br />click to change`;
        document.querySelector('#cur-currency').innerHTML = currencyTxt;    
        
        const buyBtn = document.querySelector('#buy_button');
        if (!buyBtn) return;

        try {
          const prices = JSON.parse(buyBtn.attributes['data-item-price'].value);
          if (currency === "usd") {
            buyBtn.innerText = `Just click here: \$${prices.usd}`;
          }
          else {
            buyBtn.innerText = `Just click here: ${prices.usd}€`;
          }
        }
        catch(err) {
          console.warn(err);
        }
      };

      window.switchCurrency = (currency) => {
        const currentCurrency = window.getCurrentCurrency();

        try {
          if (!currency || !currency.toLowerCase) {
            // just toggle..
            if (currentCurrency == 'usd') {
              currency = 'eur';
            }
            else {
              currency = 'usd';
            }
          }

          currency = currency.toLowerCase();

          if (window.getCurrentCurrency() != currency) {
            try {
              window.localStorage.setItem(LOCALSTORAGE_CURRENCY_KEY, currency);
            } catch (error) {
            console.log('could not set our current currency..', error);
            }

            const validCurrencies = ['usd', 'eur'];
            if (!validCurrencies.includes(currency)) {
              return console.log('invalid currency!', currency);
            }

            Snipcart.api.session.setCurrency(currency);
          }

          window.displayCurrency(currency);
        } catch (error) {
          console.log(error);
        }
      };

      setTimeout(() => {
        const curCurrency = window.getCurrentCurrency('eur');
        console.log('current currency..', curCurrency);

        // just display it..
        window.displayCurrency(curCurrency);
      }, 2000);
    </script>

  </body>
</html>
